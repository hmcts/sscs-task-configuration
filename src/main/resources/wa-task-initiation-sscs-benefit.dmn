<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:camunda="http://camunda.org/schema/1.0/dmn" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:di="http://www.omg.org/spec/DMN/20180521/DI/" id="wa-initiation-definition" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.1.0">
  <decision id="wa-task-initiation-sscs-benefit" name="Task initiation DMN">
    <informationRequirement id="InformationRequirement_0tjxocg">
      <requiredDecision href="#sscs-task-initiation-date-calculation-defaults" />
    </informationRequirement>
    <decisionTable id="DecisionTable_0jtevuc" hitPolicy="COLLECT">
      <input id="Input_1" label="Event Id" biodi:width="278" camunda:inputVariable="eventId">
        <inputExpression id="InputExpression_1" typeRef="string">
          <text></text>
        </inputExpression>
      </input>
      <input id="InputClause_0gxli97" label="Post event state" biodi:width="150" camunda:inputVariable="postEventState">
        <inputExpression id="LiteralExpression_0dijl5x" typeRef="string">
          <text></text>
        </inputExpression>
      </input>
      <input id="InputClause_09qqpx6" label="DWP Further Info" camunda:inputVariable="dwpFurtherInfo">
        <inputExpression id="LiteralExpression_0nsfl92" typeRef="string">
          <text>if(additionalData != null and additionalData.Data != null and additionalData.Data.dwpFurtherInfo
            != null) then
            additionalData.Data.dwpFurtherInfo 
            else
            null</text>
        </inputExpression>
      </input>
      <output id="Output_1" label="Task Id" name="taskId" typeRef="string" biodi:width="193" />
      <output id="OutputClause_0p5fhhd" label="Name" name="name" typeRef="string" biodi:width="234" />
      <output id="OutputClause_165p3r3" label="Delay Duration" name="delayDuration" typeRef="integer" biodi:width="150" />
      <output id="OutputClause_0i6c6c2" label="Working Days Allowed" name="workingDaysAllowed" typeRef="integer" biodi:width="208" />
      <output id="OutputClause_10rno4c" label="Process Categories Identifiers" name="processCategories" typeRef="string" biodi:width="273" />
      <rule id="DecisionRule_1k8i9hn">
        <description>This event is automatically set in the backend to be sent to the TCW</description>
        <inputEntry id="UnaryTests_0h7w1r5">
          <text>"nonCompliant"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_04h5jg8">
          <text></text>
        </inputEntry>
        <inputEntry id="UnaryTests_1wvprxb">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1f3k7q8">
          <text>"nonCompliantCase"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_0el1oa6">
          <text>"Review non-compliant appeal"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_133o9s1">
          <text></text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1ukwua4">
          <text>2</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_0mhv54f">
          <text>"Non-compliant appeal"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_1xca00x">
        <inputEntry id="UnaryTests_0m0pdx9">
          <text>"draftToIncompleteApplication", "incompleteApplicationReceived"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_087it8y">
          <text></text>
        </inputEntry>
        <inputEntry id="UnaryTests_04ulcvj">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_16rjk56">
          <text>"reviewIncompleteAppeal"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_0zzimui">
          <text>"Review Incomplete Appeal"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1oeazlt">
          <text></text>
        </outputEntry>
        <outputEntry id="LiteralExpression_187dsab">
          <text>5</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1y54qlr">
          <text>"Routine work"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_0fw59xg">
        <inputEntry id="UnaryTests_1xuywjj">
          <text>"hmctsResponseReviewed", "validSendToInterloc"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_1r32833">
          <text></text>
        </inputEntry>
        <inputEntry id="UnaryTests_14kwvou">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_01zq61j">
          <text>"referredToInterlocJudge"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_0ptda7t">
          <text>"Referred to interloc"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_14ar4hy">
          <text></text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1rj02r6">
          <text>2</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_02ekbax">
          <text>"Routine work"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_02rz2kk">
        <inputEntry id="UnaryTests_0rqm4u2">
          <text>"requestInfoIncompleteApplication"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_0lh9r0z">
          <text>"withDwp"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_0eauflk">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1rw39zd">
          <text>"reviewInformationRequested"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1u6r5ub">
          <text>"Review Information Requested"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1bi0kgo">
          <text>2</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_007uex6">
          <text>3</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1nj3ev8">
          <text>"reviewInformationRequested"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_1xqagg7">
        <inputEntry id="UnaryTests_00i9dmn">
          <text>"dwpUploadResponse"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_1nspqgr">
          <text>"withDwp"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_0bql2sl">
          <text>"Yes"</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_14npkzr">
          <text>"reviewFtaResponse"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1208ebj">
          <text>"Review FTA Response"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_17h8e8i">
          <text></text>
        </outputEntry>
        <outputEntry id="LiteralExpression_0dl8lim">
          <text>2</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1elelam">
          <text>"reviewFtaResponse"</text>
        </outputEntry>
      </rule>
       <rule id="DecisionRule_00z0ypi">
        <inputEntry id="UnaryTests_0b3cbrp">
          <text>"sendToAdmin"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_0h1lt5w">
          <text></text>
        </inputEntry>
        <inputEntry id="UnaryTests_1rdsw6q">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1dvy239">
          <text>"reviewAdminAction"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_0o512rv">
          <text>"Review Admin Action"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_1xlhj92">
          <text></text>
        </outputEntry>
        <outputEntry id="LiteralExpression_019bkck">
          <text>10</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_00vxeom">
          <text>"reviewAdminAction"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <decision id="sscs-task-initiation-date-calculation-defaults" name="Date Calculation Defaults">
    <informationRequirement id="InformationRequirement_0tk6k3u">
      <requiredDecision href="#Decision_1n3y86t" />
    </informationRequirement>
    <decisionTable id="DecisionTable_172aal0">
      <input id="InputClause_1ivphcb" biodi:width="150">
        <inputExpression id="LiteralExpression_1q5ra4z" typeRef="string" />
      </input>
      <output id="OutputClause_09u4yj0" label="date_defaults_1" name="date_defaults_1" typeRef="json" biodi:width="699" />
      <rule id="DecisionRule_1hf309o">
        <inputEntry id="UnaryTests_14er03w">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1lj2tyf">
          <text>{
  delayUntilOrigin: today(),
  delayUtilNonWorkingCalendar: nonWorkingDayCalendar
}</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <decision id="Decision_1n3y86t" name="Non Working Days">
    <decisionTable id="DecisionTable_06domdb" hitPolicy="FIRST" biodi:annotationsWidth="400">
      <input id="InputClause_08bc456" label="isScottishCase" camunda:inputVariable="isScottishCase">
        <inputExpression id="LiteralExpression_187cqdu" typeRef="string">
          <text>if(additionalData != null and additionalData.Data != null and additionalData.Data.isScottishCase!=null) then
            additionalData.Data.isScottishCase
else
null</text>
        </inputExpression>
      </input>
      <input id="InputClause_0jnhmid" label="processingVenue" camunda:inputVariable="processingVenue">
        <inputExpression id="LiteralExpression_1j111ju" typeRef="string">
          <text>if(additionalData != null and additionalData.Data != null and additionalData.Data.processingVenue!=null) then
            additionalData.Data.processingVenue
else
null</text>
        </inputExpression>
      </input>
      <output id="OutputClause_16oeyw9" label="nonWorkingDayCalendar" name="nonWorkingDayCalendar" typeRef="string" biodi:width="1020" />
      <rule id="DecisionRule_0fs7scb">
        <inputEntry id="UnaryTests_0wfsts1">
          <text>"No"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_0lkheq6">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_0k547o3">
          <text>"https://raw.githubusercontent.com/hmcts/sscs-task-configuration/work-allocation-admin-tasks/src/main/resources/sscs-non-working-days-england-and-wales.json"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_0nuuzf6">
        <inputEntry id="UnaryTests_0d5j63h">
          <text>"Yes"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_15aug2u">
          <text>"Dundee"</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1ry3nv1">
          <text>"https://raw.githubusercontent.com/hmcts/sscs-task-configuration/work-allocation-admin-tasks/src/main/resources/sscs-non-working-days-scotland-dundee.json"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_0r79p18">
        <inputEntry id="UnaryTests_1wipwas">
          <text>"Yes"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_1roo56f">
          <text>"Edinburgh"</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1tkdctg">
          <text>"https://raw.githubusercontent.com/hmcts/sscs-task-configuration/work-allocation-admin-tasks/src/main/resources/sscs-non-working-days-scotland-edinburgh.json"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_0hp6ifj">
        <inputEntry id="UnaryTests_180p17v">
          <text>"Yes"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_1jop8zo">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_0bukt9p">
          <text>"https://raw.githubusercontent.com/hmcts/sscs-task-configuration/work-allocation-admin-tasks/src/main/resources/sscs-non-working-days-scotland.json"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_19qqa57">
        <inputEntry id="UnaryTests_169515v">
          <text></text>
        </inputEntry>
        <inputEntry id="UnaryTests_173qjzh">
          <text></text>
        </inputEntry>
        <outputEntry id="LiteralExpression_1veyac7">
          <text>"https://raw.githubusercontent.com/hmcts/sscs-task-configuration/work-allocation-admin-tasks/src/main/resources/sscs-non-working-days-england-and-wales.json"</text>
        </outputEntry>
      </rule>     
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_0b2rkcb">
      <dmndi:DMNShape id="DMNShape_0wc7glt" dmnElementRef="wa-task-initiation-sscs-benefit">
        <dc:Bounds height="80" width="180" x="150" y="80" />
      </dmndi:DMNShape>
      <dmndi:DMNEdge id="DMNEdge_0slvwmm" dmnElementRef="InformationRequirement_0tjxocg">
        <di:waypoint x="450" y="120" />
        <di:waypoint x="350" y="120" />
        <di:waypoint x="330" y="120" />
      </dmndi:DMNEdge>
      <dmndi:DMNShape id="DMNShape_155l404" dmnElementRef="sscs-task-initiation-date-calculation-defaults">
        <dc:Bounds height="80" width="180" x="450" y="80" />
      </dmndi:DMNShape>
      <dmndi:DMNEdge id="DMNEdge_1q6bx3v" dmnElementRef="InformationRequirement_0tk6k3u">
        <di:waypoint x="740" y="120" />
        <di:waypoint x="650" y="120" />
        <di:waypoint x="630" y="120" />
      </dmndi:DMNEdge>
      <dmndi:DMNShape id="DMNShape_0s4z50s" dmnElementRef="Decision_1n3y86t">
        <dc:Bounds height="80" width="180" x="740" y="80" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>